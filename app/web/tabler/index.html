<!doctype html>
<!--
  Tabler homepage for PayrollAnalyzer.
  Restored to be the application's proper landing page (no redirect to database.html).
  The original Tabler markup follows.
-->
<!doctype html>
<!--
* Tabler - Premium and Open Source dashboard template with responsive and high quality UI.
* @version 1.0.0-beta20
* @link https://tabler.io
* Copyright 2018-2023 The Tabler Authors
* Copyright 2018-2023 codecalm.net Paweł Kuna
* Licensed under MIT (https://github.com/tabler/tabler/blob/master/LICENSE)
-->
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>Dashboard - Tabler</title>
    <!-- CSS files -->
    <link href="./dist/css/tabler.min.css?1692870487" rel="stylesheet"/>
    <link href="./dist/css/tabler-vendors.min.css?1692870487" rel="stylesheet"/>
    <style>
      /* OFFLINE: CDN Inter removed - using system font stack */
      :root {
      	--tblr-font-sans-serif: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      }
      body {
      	font-feature-settings: "cv03", "cv04", "cv11";
      }
    </style>
  </head>
  <body>
    <script src="./dist/js/tabler.min.js?1692870487" defer></script>
    <!-- ApexCharts (LOCAL - offline complet) -->
    <script src="./dist/libs/apexcharts/dist/apexcharts.min.js"></script>
    <!-- Options de graphique -->
    <script src="./js/chart-options.js"></script>
    <!-- Client API unifié -->
    <script src="./js/api-client.js"></script>
    <script>
      // Ouverture du menu "Analyse" au survol (hover)
      document.addEventListener('DOMContentLoaded', function () {
        var dropdown = document.querySelector('.nav-item.dropdown > .nav-link.dropdown-toggle .nav-link-title')?.textContent?.trim() === 'Analyse'
          ? document.querySelector('.nav-item.dropdown')
          : null;
        if (!dropdown) {
          // fallback: chercher par texte du lien
          var links = document.querySelectorAll('.nav-item.dropdown > .nav-link.dropdown-toggle .nav-link-title');
          links.forEach(function (lnk) {
            if (lnk.textContent.trim() === 'Analyse') {
              dropdown = lnk.closest('.nav-item.dropdown');
            }
          });
        }
        if (dropdown) {
          var toggle = dropdown.querySelector('.nav-link.dropdown-toggle');
          var menu = dropdown.querySelector('.dropdown-menu');
          if (toggle && menu) {
            dropdown.addEventListener('mouseenter', function () {
              dropdown.classList.add('show');
              menu.classList.add('show');
              toggle.setAttribute('aria-expanded', 'true');
            });
            dropdown.addEventListener('mouseleave', function () {
              dropdown.classList.remove('show');
              menu.classList.remove('show');
              toggle.setAttribute('aria-expanded', 'false');
            });
          }
        }
      });
    </script>
    
    <!-- Helpers format fr-CA (CAD canadien) -->
    <script>
      // Format monétaire CAD canadien avec "$" uniquement (pas "CA$" ni "CAD")
      window.fmtCad = function(value) {
        try {
          return new Intl.NumberFormat('fr-CA', {
            style: 'currency',
            currency: 'CAD',
            currencyDisplay: 'narrowSymbol',  // Force "$" uniquement
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
          }).format(value);
        } catch (e) {
          // Fallback si erreur
          return String(value).replace('.', ',') + ' $';
        }
      };
      
      // Format date fr-CA
      window.fmtDate = function(dateStr) {
        try {
          return new Intl.DateTimeFormat('fr-CA', { 
            dateStyle: 'medium' 
          }).format(new Date(dateStr));
        } catch (e) {
          return dateStr;
        }
      };
    </script>
    <div class="page">
      <!-- Sidebar -->
      <aside class="navbar navbar-vertical navbar-expand-lg" data-bs-theme="dark">
        <div class="container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#sidebar-menu" aria-controls="sidebar-menu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <h1 class="navbar-brand navbar-brand-autodark">
            <a href=".">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-dashboard" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M12 13m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path>
                <path d="M13.45 11.55l2.05 -2.05"></path>
                <path d="M6.4 20a9 9 0 1 1 11.2 0z"></path>
              </svg>
              Tabler
            </a>
          </h1>
          <div class="navbar-nav flex-row d-lg-none">
            <div class="nav-item d-none d-lg-flex me-3">
              <div class="btn-list">
                <a href="https://github.com/tabler/tabler" class="btn" target="_blank" rel="noreferrer">
                  <!-- Download SVG icon from http://tabler-icons.io/i/brand-github -->
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" /></svg>
                  Source code
                </a>
                <a href="https://github.com/sponsors/codecalm" class="btn" target="_blank" rel="noreferrer">
                  <!-- Download SVG icon from http://tabler-icons.io/i/heart -->
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon text-pink" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>
                  Sponsor
                </a>
              </div>
            </div>
            <div class="d-none d-lg-flex">
              <a href="?theme=dark" class="nav-link px-0 hide-theme-dark" title="Enable dark mode" data-bs-toggle="tooltip"
		   data-bs-placement="bottom">
                <!-- Download SVG icon from http://tabler-icons.io/i/moon -->
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" /></svg>
              </a>
              <a href="?theme=light" class="nav-link px-0 hide-theme-light" title="Enable light mode" data-bs-toggle="tooltip"
		   data-bs-placement="bottom">
                <!-- Download SVG icon from http://tabler-icons.io/i/sun -->
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" /><path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7" /></svg>
              </a>
              <div class="nav-item dropdown d-none d-md-flex me-3">
                <a href="#" class="nav-link px-0" data-bs-toggle="dropdown" tabindex="-1" aria-label="Show notifications">
                  <!-- Download SVG icon from http://tabler-icons.io/i/bell -->
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 5a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6" /><path d="M9 17v1a3 3 0 0 0 6 0v-1" /></svg>
                  <span class="badge bg-red"></span>
                </a>
                <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-end dropdown-menu-card">
                  <div class="card">
                    <div class="card-header">
                      <h3 class="card-title">Last updates</h3>
                    </div>
                    <div class="list-group list-group-flush list-group-hoverable">
                      <div class="list-group-item">
                        <div class="row align-items-center">
                          <div class="col-auto"><span class="status-dot status-dot-animated bg-red d-block"></span></div>
                          <div class="col text-truncate">
                            <a href="#" class="text-body d-block">Example 1</a>
                            <div class="d-block text-secondary text-truncate mt-n1">
                              Change deprecated html tags to text decoration classes (#29604)
                            </div>
                          </div>
                          <div class="col-auto">
                            <a href="#" class="list-group-item-actions">
                              <!-- Download SVG icon from http://tabler-icons.io/i/star -->
                              <svg xmlns="http://www.w3.org/2000/svg" class="icon text-muted" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z" /></svg>
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="nav-item dropdown">
              <a href="#" class="nav-link d-flex lh-1 text-reset p-0" data-bs-toggle="dropdown" aria-label="Open user menu">
                <span class="avatar avatar-sm" style="background-image: url(./static/avatars/000m.jpg)"></span>
                <div class="d-none d-xl-block ps-2">
                  <div>Paweł Kuna</div>
                  <div class="mt-1 small text-secondary">UI Designer</div>
                </div>
              </a>
              <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                <a href="#" class="dropdown-item">Status</a>
                <a href="#" class="dropdown-item">Profile</a>
                <a href="#" class="dropdown-item">Feedback</a>
                <div class="dropdown-divider"></div>
                <a href="./settings.html" class="dropdown-item">Settings</a>
                <a href="./sign-in.html" class="dropdown-item">Logout</a>
              </div>
            </div>
          </div>
          <div class="collapse navbar-collapse" id="sidebar-menu">
            <ul class="navbar-nav pt-lg-3">
              <li class="nav-item active">
                <a class="nav-link" href="./index.html" >
                  <span class="nav-link-icon d-md-none d-lg-inline-block">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l-2 0l9 -9l9 9l-2 0l0 7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2l0 -7z" /><path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" /></svg>
                  </span>
                  <span class="nav-link-title">Accueil</span>
                </a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" data-bs-auto-close="outside" role="button" aria-expanded="false">
                  <span class="nav-link-icon d-md-none d-lg-inline-block">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17l6 -6l4 4l8 -8" /><path d="M14 7l7 0l0 7" /></svg>
                  </span>
                  <span class="nav-link-title">Analyse</span>
                </a>
                <div class="dropdown-menu">
                  <div class="dropdown-menu-columns">
                    <div class="dropdown-menu-column">
                      <a class="dropdown-item" href="./analytics_accueil.html">Accueil / KPIs</a>
                      <a class="dropdown-item" href="./analytics_galerie_charts.html">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon me-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"><path d="M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z" /><path d="M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z" /></svg>
                        Galerie de graphiques
                      </a>
                      <a class="dropdown-item" href="./analytics_masse.html">Masse salariale</a>
                      <a class="dropdown-item" href="./analytics_categories.html">Catégories de paie</a>
                      <a class="dropdown-item" href="./analytics_postes.html">Postes budgétaires</a>
                      <a class="dropdown-item" href="./analytics_fonctions.html">Fonctions</a>
                      <a class="dropdown-item" href="./analytics_employes.html">Employés (Analytique)</a>
                      <a class="dropdown-item" href="./analytics_codes.html">Codes de paie</a>
                      <a class="dropdown-item" href="./analytics_heures_primes.html">Heures & Primes</a>
                      <a class="dropdown-item" href="./analytics_avantages.html">Avantages sociaux</a>
                      <a class="dropdown-item" href="./analytics_turnover.html">Turnover</a>
                      <a class="dropdown-item" href="./analytics_conformite.html">Conformité</a>
                      <a class="dropdown-item" href="./analytics_budget_reel.html">Budget vs Réel</a>
                      <a class="dropdown-item" href="./analytics_equite.html">Équité</a>
                      <a class="dropdown-item" href="./analytics_qualite.html">Qualité des données</a>
                      <a class="dropdown-item" href="./analytics_exports.html">Exports</a>
                      <a class="dropdown-item" href="./analytics_parametres.html">Paramètres</a>
                    </div>
                  </div>
                </div>
              </li>

              <li class="nav-item">
                <a class="nav-link" href="./employees.html">
                  <span class="nav-link-icon d-md-none d-lg-inline-block">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" /><path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" /></svg>
                  </span>
                  <span class="nav-link-title">Employés</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="./teste.html">
                  <span class="nav-link-icon d-md-none d-lg-inline-block">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="4" width="16" height="16" rx="2"/><path d="M9 12h6"/><path d="M12 9v6"/></svg>
                  </span>
                  <span class="nav-link-title">Test DataTable</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="./periods.html">
                  <span class="nav-link-icon d-md-none d-lg-inline-block">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z" /><path d="M16 3v4" /><path d="M8 3v4" /><path d="M4 11h16" /><path d="M7 15h.01" /><path d="M11 15h.01" /><path d="M15 15h.01" /><path d="M3 15h18" /><path d="M7 19h.01" /><path d="M11 19h.01" /><path d="M15 19h.01" /></svg>
                  </span>
                  <span class="nav-link-title">Périodes</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="./data-viewer.html">
                  <span class="nav-link-icon d-md-none d-lg-inline-block">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 12h18" /><path d="M3 6h18" /><path d="M3 18h18" /></svg>
                  </span>
                  <span class="nav-link-title">Visualisation de données</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="./period-report.html">
                  <span class="nav-link-icon d-md-none d-lg-inline-block">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M9 9l1 0" /><path d="M9 13l6 0" /><path d="M9 17l6 0" /></svg>
                  </span>
                  <span class="nav-link-title">Rapports</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="./database.html">
                  <span class="nav-link-icon d-md-none d-lg-inline-block">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 6m-8 0a8 3 0 1 0 16 0a8 3 0 1 0 -16 0" /><path d="M4 6v6a8 3 0 0 0 16 0v-6" /><path d="M4 12v6a8 3 0 0 0 16 0v-6" /></svg>
                  </span>
                  <span class="nav-link-title">Base de données</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="./assistant.html">
                  <span class="nav-link-icon d-md-none d-lg-inline-block">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0" /><path d="M12 9h.01" /><path d="M11 12h1v4h1" /></svg>
                  </span>
                  <span class="nav-link-title">Assistant IA</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="./import.html">
                  <span class="nav-link-icon d-md-none d-lg-inline-block">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 9l5 -5l5 5" /><path d="M12 4l0 12" /></svg>
                  </span>
                  <span class="nav-link-title">Importer des données</span>
                </a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#navbar-layout" data-bs-toggle="dropdown" data-bs-auto-close="false" role="button" aria-expanded="false" >
                  <span class="nav-link-icon d-md-none d-lg-inline-block"><!-- Download SVG icon from http://tabler-icons.io/i/layout-2 -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v1a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z" /><path d="M4 13m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v3a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z" /><path d="M14 4m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v3a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z" /><path d="M14 15m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v1a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z" /></svg>
                  </span>
                  <span class="nav-link-title">
                    Layout
                  </span>
                </a>
                <div class="dropdown-menu">
                  <div class="dropdown-menu-columns">
                    <div class="dropdown-menu-column">
                      <a class="dropdown-item" href="./layout-horizontal.html">
                        Horizontal
                      </a>
                      <a class="dropdown-item" href="./layout-boxed.html">
                        Boxed
                        <span class="badge badge-sm bg-green-lt text-uppercase ms-auto">New</span>
                      </a>
                      <a class="dropdown-item active" href="./layout-vertical.html">
                        Vertical
                      </a>
                      <a class="dropdown-item" href="./layout-vertical-transparent.html">
                        Vertical transparent
                      </a>
                      <a class="dropdown-item" href="./layout-vertical-right.html">
                        Right vertical
                      </a>
                      <a class="dropdown-item" href="./layout-condensed.html">
                        Condensed
                      </a>
                      <a class="dropdown-item" href="./layout-combo.html">
                        Combined
                      </a>
                    </div>
                  </div>
                </div>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="./docs/" >
                  <span class="nav-link-icon d-md-none d-lg-inline-block"><!-- Download SVG icon from http://tabler-icons.io/i/file-text -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M9 9l1 0" /><path d="M9 13l6 0" /><path d="M9 17l6 0" /></svg>
                  </span>
                  <span class="nav-link-title">
                    Documentation
                  </span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </aside>
      <!-- Navbar -->
      <header class="navbar navbar-expand-md d-print-none" >
        <div class="container-xl">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <h1 class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3">
            <a href=".">
              <img src="./static/logo.svg" width="110" height="32" alt="Tabler" class="navbar-brand-image">
            </a>
          </h1>
          <div class="navbar-nav flex-row order-md-last">
            <div class="nav-item d-none d-md-flex me-3">
              <div class="btn-list">
                <a href="https://github.com/tabler/tabler" class="btn" target="_blank" rel="noreferrer">
                  <!-- Download SVG icon from http://tabler-icons.io/i/brand-github -->
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" /></svg>
                  Source code
                </a>
                <a href="https://github.com/sponsors/codecalm" class="btn" target="_blank" rel="noreferrer">
                  <!-- Download SVG icon from http://tabler-icons.io/i/heart -->
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon text-pink" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>
                  Sponsor
                </a>
              </div>
            </div>
            <div class="d-none d-md-flex">
              <a href="?theme=dark" class="nav-link px-0 hide-theme-dark" title="Enable dark mode" data-bs-toggle="tooltip"
		   data-bs-placement="bottom">
                <!-- Download SVG icon from http://tabler-icons.io/i/moon -->
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" /></svg>
              </a>
              <a href="?theme=light" class="nav-link px-0 hide-theme-light" title="Enable light mode" data-bs-toggle="tooltip"
		   data-bs-placement="bottom">
                <!-- Download SVG icon from http://tabler-icons.io/i/sun -->
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" /><path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7" /></svg>
              </a>
              <div class="nav-item dropdown d-none d-md-flex me-3">
                <a href="#" class="nav-link px-0" data-bs-toggle="dropdown" tabindex="-1" aria-label="Show notifications">
                  <!-- Download SVG icon from http://tabler-icons.io/i/bell -->
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 5a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6" /><path d="M9 17v1a3 3 0 0 0 6 0v-1" /></svg>
                  <span class="badge bg-red"></span>
                </a>
                <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-end dropdown-menu-card">
                  <div class="card">
                    <div class="card-header">
                      <h3 class="card-title">Last updates</h3>
                    </div>
                    <div class="list-group list-group-flush list-group-hoverable">
                      <div class="list-group-item">
                        <div class="row align-items-center">
                          <div class="col-auto"><span class="status-dot status-dot-animated bg-red d-block"></span></div>
                          <div class="col text-truncate">
                            <a href="#" class="text-body d-block">Example 1</a>
                            <div class="d-block text-secondary text-truncate mt-n1">
                              Change deprecated html tags to text decoration classes (#29604)
                            </div>
                          </div>
                          <div class="col-auto">
                            <a href="#" class="list-group-item-actions">
                              <!-- Download SVG icon from http://tabler-icons.io/i/star -->
                              <svg xmlns="http://www.w3.org/2000/svg" class="icon text-muted" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z" /></svg>
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="nav-item dropdown">
              <a href="#" class="nav-link d-flex lh-1 text-reset p-0" data-bs-toggle="dropdown" aria-label="Open user menu">
                <span class="avatar avatar-sm" style="background-image: url(./static/avatars/000m.jpg)"></span>
                <div class="d-none d-xl-block ps-2">
                  <div>Paweł Kuna</div>
                  <div class="mt-1 small text-secondary">UI Designer</div>
                </div>
              </a>
              <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                <a href="#" class="dropdown-item">Status</a>
                <a href="./profile.html" class="dropdown-item">Profile</a>
                <a href="#" class="dropdown-item">Feedback</a>
                <div class="dropdown-divider"></div>
                <a href="./settings.html" class="dropdown-item">Settings</a>
                <a href="./sign-in.html" class="dropdown-item">Logout</a>
              </div>
            </div>
          </div>
        </div>
      </header>
      <div class="page-wrapper">
        <!-- Page header -->
        <div class="page-header d-print-none">
          <div class="container-xl">
            <div class="row g-2 align-items-center">
              <div class="col">
                <!-- Page pre-title -->
                <div class="page-pretitle">
                  Overview
                </div>
                <h2 class="page-title">
                  Dashboard
                </h2>
              </div>
              <!-- Indicateur connexion DB -->
              <div class="col-auto">
                <span class="badge bg-secondary" id="db-status">
                  <span class="spinner-border spinner-border-sm me-1" role="status"></span>
                  Connexion...
                </span>
              </div>
              <!-- Page title actions -->
              <div class="col-auto ms-auto d-print-none">
                <div class="btn-list">
                  <span class="d-none d-sm-inline">
                    <a href="#" class="btn">
                      New view
                    </a>
                  </span>
                  <a href="#" class="btn btn-primary d-none d-sm-inline-block" data-bs-toggle="modal" data-bs-target="#modal-report">
                    <!-- Download SVG icon from http://tabler-icons.io/i/plus -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>
                    Create new report
                  </a>
                  <a href="#" class="btn btn-primary d-sm-none btn-icon" data-bs-toggle="modal" data-bs-target="#modal-report" aria-label="Create new report">
                    <!-- Download SVG icon from http://tabler-icons.io/i/plus -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Page body -->
        <div class="page-body">
          <div class="container-xl">
            <div class="row row-deck row-cards">
              <div class="col-sm-6 col-lg-3">
                <div class="card">
                  <div class="card-body">
                    <div class="d-flex align-items-center">
                      <div class="subheader">Masse salariale</div>
                      <div class="ms-auto lh-1">
                        <div class="dropdown">
                          <a class="dropdown-toggle text-secondary" href="#" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Mois actuel</a>
                          <div class="dropdown-menu dropdown-menu-end">
                            <a class="dropdown-item active" href="#">Mois actuel</a>
                            <a class="dropdown-item" href="#">30 derniers jours</a>
                            <a class="dropdown-item" href="#">3 derniers mois</a>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="h1 mb-3" id="kpi-masse">0,00 $</div>
                    <div class="d-flex mb-2">
                      <div>Total brut</div>
                      <div class="ms-auto">
                        <span class="text-green d-inline-flex align-items-center lh-1" id="kpi-masse-trend">
                          +0%
                          <svg xmlns="http://www.w3.org/2000/svg" class="icon ms-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17l6 -6l4 4l8 -8" /><path d="M14 7l7 0l0 7" /></svg>
                        </span>
                      </div>
                    </div>
                    <div class="progress progress-sm">
                      <div class="progress-bar bg-primary" style="width: 0%" role="progressbar" id="kpi-masse-progress">
                        <span class="visually-hidden">0% Complete</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-lg-3">
                <div class="card">
                  <div class="card-body">
                    <div class="d-flex align-items-center">
                      <div class="subheader">Net moyen</div>
                      <div class="ms-auto lh-1">
                        <div class="dropdown">
                          <a class="dropdown-toggle text-secondary" href="#" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Mois actuel</a>
                          <div class="dropdown-menu dropdown-menu-end">
                            <a class="dropdown-item active" href="#">Mois actuel</a>
                            <a class="dropdown-item" href="#">30 derniers jours</a>
                            <a class="dropdown-item" href="#">3 derniers mois</a>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="d-flex align-items-baseline">
                      <div class="h1 mb-0 me-2" id="kpi-net">0,00 $</div>
                      <div class="me-auto">
                        <span class="text-green d-inline-flex align-items-center lh-1" id="kpi-net-trend">
                          +0%
                          <svg xmlns="http://www.w3.org/2000/svg" class="icon ms-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17l6 -6l4 4l8 -8" /><path d="M14 7l7 0l0 7" /></svg>
                        </span>
                      </div>
                    </div>
                  </div>
                  <div id="chart-revenue-bg" class="chart-sm"></div>
                </div>
              </div>
              <div class="col-sm-6 col-lg-3">
                <div class="card">
                  <div class="card-body">
                    <div class="d-flex align-items-center">
                      <div class="subheader">Déductions</div>
                    </div>
                    <div class="h1 mb-3" id="kpi-deductions">0,00 $</div>
                    <div class="d-flex mb-2">
                      <div>Total cotisations</div>
                      <div class="ms-auto">
                        <span class="text-red d-inline-flex align-items-center lh-1" id="kpi-deductions-trend">
                          <svg xmlns="http://www.w3.org/2000/svg" class="icon ms-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7l6 6l4 -4l8 8" /><path d="M21 10l0 7l-7 0" /></svg>
                          0%
                        </span>
                      </div>
                    </div>
                    <div class="progress progress-sm">
                      <div class="progress-bar bg-danger" style="width: 0%" role="progressbar" id="kpi-deductions-progress">
                        <span class="visually-hidden">0% Complete</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-lg-3">
                <div class="card">
                  <div class="card-body">
                    <div class="d-flex align-items-center">
                      <div class="subheader">Employés actifs</div>
                    </div>
                    <div class="d-flex align-items-baseline">
                      <div class="h1 mb-3 me-2" id="kpi-employes">0</div>
                      <div class="me-auto">
                        <span class="text-blue d-inline-flex align-items-center lh-1" id="kpi-employes-trend">
                          +0%
                          <svg xmlns="http://www.w3.org/2000/svg" class="icon ms-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l14 0" /></svg>
                        </span>
                      </div>
                    </div>
                    <div id="chart-active-users" class="chart-sm"></div>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="row row-cards">
                  <div class="col-sm-6 col-lg-3">
                    <div class="card card-sm">
                      <div class="card-body">
                        <div class="row align-items-center">
                          <div class="col-auto">
                            <span class="bg-primary text-white avatar"><!-- Download SVG icon from http://tabler-icons.io/i/currency-dollar -->
                              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M16.7 8a3 3 0 0 0 -2.7 -2h-4a3 3 0 0 0 0 6h4a3 3 0 0 1 0 6h-4a3 3 0 0 1 -2.7 -2" /><path d="M12 3v3m0 12v3" /></svg>
                            </span>
                          </div>
                          <div class="col">
                            <div class="font-weight-medium">
                              132 Sales
                            </div>
                            <div class="text-secondary">
                              12 waiting payments
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-6 col-lg-3">
                    <div class="card card-sm">
                      <div class="card-body">
                        <div class="row align-items-center">
                          <div class="col-auto">
                            <span class="bg-green text-white avatar"><!-- Download SVG icon from http://tabler-icons.io/i/shopping-cart -->
                              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M17 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M17 17h-11v-14h-2" /><path d="M6 5l14 1l-1 7h-13" /></svg>
                            </span>
                          </div>
                          <div class="col">
                            <div class="font-weight-medium">
                              78 Orders
                            </div>
                            <div class="text-secondary">
                              32 shipped
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-6 col-lg-3">
                    <div class="card card-sm">
                      <div class="card-body">
                        <div class="row align-items-center">
                          <div class="col-auto">
                            <span class="bg-twitter text-white avatar"><!-- Download SVG icon from http://tabler-icons.io/i/brand-twitter -->
                              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c0 -.249 1.51 -2.772 1.818 -4.013z" /></svg>
                            </span>
                          </div>
                          <div class="col">
                            <div class="font-weight-medium">
                              623 Shares
                            </div>
                            <div class="text-secondary">
                              16 today
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-6 col-lg-3">
                    <div class="card card-sm">
                      <div class="card-body">
                        <div class="row align-items-center">
                          <div class="col-auto">
                            <span class="bg-facebook text-white avatar"><!-- Download SVG icon from http://tabler-icons.io/i/brand-facebook -->
                              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3" /></svg>
                            </span>
                          </div>
                          <div class="col">
                            <div class="font-weight-medium">
                              132 Likes
                            </div>
                            <div class="text-secondary">
                              21 today
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="card">
                  <div class="card-body">
                    <h3 class="card-title">Traffic summary</h3>
                    <div id="chart-demo-area" class="chart-lg"></div>
                  </div>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="card h-100">
                  <div class="card-header">
                    <h3 class="card-title mb-0">Répartition par catégorie d'emploi</h3>
                  </div>
                  <div class="card-body p-0">
                    <div id="chart-category-employment" style="height: 320px;"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <footer class="footer footer-transparent d-print-none">
          <div class="container-xl">
            <div class="row text-center align-items-center flex-row-reverse">
              <div class="col-lg-auto ms-lg-auto">
                <ul class="list-inline list-inline-dots mb-0">
                  <li class="list-inline-item"><a href="https://tabler.io/docs" target="_blank" class="link-secondary" rel="noopener">Documentation</a></li>
                  <li class="list-inline-item"><a href="./license.html" class="link-secondary">License</a></li>
                  <li class="list-inline-item"><a href="https://github.com/tabler/tabler" target="_blank" class="link-secondary" rel="noopener">Source code</a></li>
                  <li class="list-inline-item">
                    <a href="https://github.com/sponsors/codecalm" target="_blank" class="link-secondary" rel="noopener">
                      <!-- Download SVG icon from http://tabler-icons.io/i/heart -->
                      <svg xmlns="http://www.w3.org/2000/svg" class="icon text-pink icon-filled icon-inline" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>
                      Sponsor
                    </a>
                  </li>
                </ul>
              </div>
              <div class="col-12 col-lg-auto mt-3 mt-lg-0">
                <ul class="list-inline list-inline-dots mb-0">
                  <li class="list-inline-item">
                    Copyright &copy; 2023
                    <a href="." class="link-secondary">Tabler</a>.
                    All rights reserved.
                  </li>
                  <li class="list-inline-item">
                    <a href="./changelog.html" class="link-secondary" rel="noopener">
                      v1.0.0-beta20
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </footer>
      </div>
    </div>
    <script>
      // @formatter:off
      document.addEventListener("DOMContentLoaded", function () {
      	window.ApexCharts && (new ApexCharts(document.getElementById('chart-revenue-bg'), {
      		chart: {
                id: "dashboard-revenue",
      			type: "area",
      			fontFamily: 'inherit',
      			height: 40.0,
      			sparkline: {
      				enabled: true
      			},
      			animations: {
      				enabled: false
      			},
      			defaultLocale: 'fr',
      			locales: [{
      				name: 'fr',
      				options: {
      					months: ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'],
      					shortMonths: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Jun', 'Jul', 'Aoû', 'Sep', 'Oct', 'Nov', 'Déc'],
      					days: ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'],
      					shortDays: ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'],
      					toolbar: {
      						download: 'Télécharger SVG',
      						selection: 'Sélection',
      						selectionZoom: 'Zoom sélection',
      						zoomIn: 'Zoom avant',
      						zoomOut: 'Zoom arrière',
      						pan: 'Panoramique',
      						reset: 'Réinitialiser zoom'
      					}
      				}
      			}]
      		},
      		dataLabels: {
      			enabled: false,
      		},
      		fill: {
      			opacity: .16,
      			type: 'solid'
      		},
      		stroke: {
      			width: 2,
      			lineCap: "round",
      			curve: "smooth",
      		},
      		series: [{
      			name: "Revenus",
      			data: [37, 35, 44, 28, 36, 24, 65, 31, 37, 39, 62, 51, 35, 41, 35, 27, 93, 53, 61, 27, 54, 43, 19, 46, 39, 62, 51, 35, 41, 67]
      		}],
      		tooltip: {
      			theme: 'dark',
      			y: {
      				formatter: function(val) {
      					return window.fmtCad ? window.fmtCad(val) : val + ' $';
      				}
      			}
      		},
      		grid: {
      			strokeDashArray: 4,
      		},
      		xaxis: {
      			labels: {
      				padding: 0,
      			},
      			tooltip: {
      				enabled: false
      			},
      			axisBorder: {
      				show: false,
      			},
      			type: 'datetime',
      		},
      		yaxis: {
      			labels: {
      				padding: 4
      			},
      		},
      		labels: [
      			'2020-06-21', '2020-06-22', '2020-06-23', '2020-06-24', '2020-06-25', '2020-06-26', '2020-06-27', '2020-06-28', '2020-06-29', '2020-06-30', '2020-07-01', '2020-07-02', '2020-07-03', '2020-07-04', '2020-07-05', '2020-07-06', '2020-07-07', '2020-07-08', '2020-07-09', '2020-07-10', '2020-07-11', '2020-07-12', '2020-07-13', '2020-07-14', '2020-07-15', '2020-07-16', '2020-07-17', '2020-07-18', '2020-07-19', '2020-07-20'
      		],
      		colors: [tabler.getColor("primary")],
      		legend: {
      			show: false,
      		},
      	})).render();
      });
      // @formatter:on
    </script>
    <script>
      // @formatter:off
      document.addEventListener("DOMContentLoaded", function () {
      	window.ApexCharts && (new ApexCharts(document.getElementById('chart-active-users'), {
      		chart: {
                id: "dashboard-active",
      			type: "area",
      			fontFamily: 'inherit',
      			height: 40.0,
      			sparkline: {
      				enabled: true
      			},
      			animations: {
      				enabled: false
      			},
      		},
      		dataLabels: {
      			enabled: false,
      		},
      		fill: {
      			opacity: .16,
      			type: 'solid'
      		},
      		stroke: {
      			width: 2,
      			lineCap: "round",
      			curve: "smooth",
      		},
      		series: [{
      			name: "Users",
      			data: [13, 11, 19, 22, 12, 7, 14, 3, 21, 8, 24, 18, 14, 8, 15, 2, 17, 15, 3, 20, 13, 20, 6, 16, 13, 11, 19, 22, 12, 7]
      		}],
      		tooltip: {
      			theme: 'dark'
      		},
      		grid: {
      			strokeDashArray: 4,
      		},
      		xaxis: {
      			labels: {
      				padding: 0,
      			},
      			tooltip: {
      				enabled: false
      			},
      			axisBorder: {
      				show: false,
      			},
      			type: 'datetime',
      		},
      		yaxis: {
      			labels: {
      				padding: 4
      			},
      		},
      		labels: [
      			'2020-06-21', '2020-06-22', '2020-06-23', '2020-06-24', '2020-06-25', '2020-06-26', '2020-06-27', '2020-06-28', '2020-06-29', '2020-06-30', '2020-07-01', '2020-07-02', '2020-07-03', '2020-07-04', '2020-07-05', '2020-07-06', '2020-07-07', '2020-07-08', '2020-07-09', '2020-07-10', '2020-07-11', '2020-07-12', '2020-07-13', '2020-07-14', '2020-07-15', '2020-07-16', '2020-07-17', '2020-07-18', '2020-07-19', '2020-07-20'
      		],
      		colors: [tabler.getColor("primary")],
      		legend: {
      			show: false,
      		},
      	})).render();
      });
      // @formatter:on
    </script>
    <script>
      const DASHBOARD_NET_LABELS = ['2020-06-20', '2020-06-21', '2020-06-22', '2020-06-23', '2020-06-24', '2020-06-25', '2020-06-26', '2020-06-27', '2020-06-28', '2020-06-29', '2020-06-30', '2020-07-01', '2020-07-02'];
      const DASHBOARD_NET_SERIES = [44, 55, 41, 67, 22, 43, 21, 33, 45, 31, 87, 65, 35];

      function getChartOptionsIconConfig() {
        return {
          icon: '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v2"/><path d="M12 17v2"/><path d="M5 12h2"/><path d="M17 12h2"/><circle cx="12" cy="12" r="3"/></svg>',
          index: -1,
          title: 'Options',
          class: 'apx-custom-options',
          click: function(chartRef) {
            if (window.ChartOptions && typeof window.ChartOptions.showOptionsPanel === 'function') {
              window.ChartOptions.showOptionsPanel(chartRef);
            } else {
              console.warn('ChartOptions indisponible');
            }
          }
        };
      }

      document.addEventListener("DOMContentLoaded", function () {
        if (!window.ApexCharts) return;
        const netEl = document.getElementById('chart-demo-area');
        if (!netEl) return;
        const netConfig = {
          chart: {
            id: "dashboard-net",
            type: "area",
            fontFamily: 'inherit',
            height: 240,
            parentHeightOffset: 0,
            toolbar: {
              show: true,
              tools: {
                customIcons: [getChartOptionsIconConfig()]
              }
            },
            animations: {
              enabled: false
            },
          },
          dataLabels: {
            enabled: false,
          },
          fill: {
            opacity: .16,
            type: 'solid'
          },
          stroke: {
            width: 2,
            lineCap: "round",
            curve: "smooth",
          },
          series: [{
            name: "Indice net",
            data: DASHBOARD_NET_SERIES
          }],
          tooltip: {
            theme: 'dark'
          },
          grid: {
            padding: {
              top: -20,
              right: 0,
              left: -4,
              bottom: -4
            },
            strokeDashArray: 4,
          },
          xaxis: {
            labels: {
              padding: 0,
            },
            tooltip: {
              enabled: false
            },
            axisBorder: {
              show: false,
            },
            type: 'datetime',
          },
          yaxis: {
            labels: {
              padding: 4
            },
          },
          labels: DASHBOARD_NET_LABELS,
          colors: [tabler.getColor("primary")],
          legend: {
            show: false,
          },
        };
        const chartNet = new ApexCharts(netEl, netConfig);
        const netRows = DASHBOARD_NET_LABELS.map((label, idx) => ({
          date: label,
          employee: 'Indice net',
          poste: 'Indice net',
          net: DASHBOARD_NET_SERIES[idx] || 0,
          gross: DASHBOARD_NET_SERIES[idx] || 0,
          employer_part: DASHBOARD_NET_SERIES[idx] || 0
        }));
        chartNet.render().then(() => {
          if (window.ChartOptions && typeof window.ChartOptions.attachChartOptions === 'function') {
            window.ChartOptions.attachChartOptions('#chart-demo-area','index','net', chartNet, () => netRows.map(row => ({ ...row })));
          }
        });
      });
    </script>
    <!-- QWebChannel Bridge Python ↔ JavaScript -->
    <script src="qrc:///qtwebchannel/qwebchannel.js"></script>
    <script>
      // Initialiser WebChannel et charger les données
      document.addEventListener("DOMContentLoaded", function() {
        console.log('Initialisation WebChannel...');
        
        // Initialiser QWebChannel
        new QWebChannel(qt.webChannelTransport, function(channel) {
          window.appBridge = channel.objects.AppBridge;  // Majuscule !
          console.log('✓ WebChannel actif (index.html)');
          
          // Mettre à jour indicateur connexion
          const dbStatusEl = document.getElementById('db-status');
          if (dbStatusEl) {
            dbStatusEl.innerHTML = '✓ DB Connectée (v3.0)';
            dbStatusEl.className = 'badge bg-success';
          }
          
          // Test ping (avec gestion Promise)
          try {
            const pingResultRaw = window.appBridge.ping();
            
            // Gérer Promise ou résultat direct
            Promise.resolve(pingResultRaw).then(result => {
              const pingResult = JSON.parse(result);
            console.log('✓ Ping:', pingResult.message);
            
          // Charger les données (auto-sélection dernière période)
              setTimeout(async () => {
            const activeDate = await resolveActivePayDate();
            await loadKpis(activeDate);
            await loadDashboardCharts(activeDate);
            await loadTable(0, 50, activeDate);
              }, 100);
            }).catch(error => {
              console.error('❌ Erreur ping:', error);
            });
          } catch (error) {
            console.error('❌ Erreur WebChannel:', error);
          }
        });
      });

      async function resolveActivePayDate() {
        try {
          if (!window.appBridge) {
            console.warn('⚠️ appBridge absent, aucune période active');
            return null;
          }
          const raw = await Promise.resolve(window.appBridge.get_active_pay_date());
          const info = JSON.parse(raw);
          const payDate = info && info.pay_date ? info.pay_date : null;
          if (!payDate) {
            console.warn('⚠️ Aucune période active détectée (base vide)');
          } else {
            console.log(`✓ Période active détectée: ${payDate} (source: ${info.source || 'unknown'})`);
          }
          return payDate;
        } catch (error) {
          console.error('❌ resolveActivePayDate:', error);
          return null;
        }
      }
      
      // Charger les KPI depuis Python
      async function loadKpis(period) {
        try {
          if (!window.appBridge) {
            console.error('❌ AppBridge non disponible');
            return;
          }
          
          const kpisJson = await Promise.resolve(window.appBridge.get_kpis(period || ""));
          const kpis = JSON.parse(kpisJson);
          console.log('✓ KPI chargés:', kpis);
          
          // Mettre à jour les 4 stat cards Tabler avec format CAD canadien
          // Card 1: Masse salariale
          const masseEl = document.getElementById('kpi-masse');
          if (masseEl) {
            masseEl.textContent = window.fmtCad(kpis.masse_salariale);
          }
          
          // Card 2: Net moyen
          const netEl = document.getElementById('kpi-net');
          if (netEl) {
            netEl.textContent = window.fmtCad(kpis.net_moyen);
          }
          
          // Card 3: Déductions
          const deductionsEl = document.getElementById('kpi-deductions');
          if (deductionsEl) {
            deductionsEl.textContent = window.fmtCad(Math.abs(kpis.deductions));
          }
          
          // Card 4: Employés
          const employesEl = document.getElementById('kpi-employes');
          if (employesEl) {
            employesEl.textContent = kpis.nb_employes.toLocaleString('fr-CA');
          }
          
          // Log pour debug
          console.log('✓ KPI mis à jour (format CAD):', kpis);
          
        } catch (error) {
          console.error('Erreur chargement KPI:', error);
        }
      }
      
      // Charger le tableau depuis Python
      async function loadTable(offset, limit, payDate) {
        try {
          if (!window.appBridge) {
            console.error('❌ AppBridge non disponible');
            return;
          }
          
          const filters = payDate ? JSON.stringify({ pay_date: payDate }) : "{}";
          const tableJson = await Promise.resolve(window.appBridge.get_table(offset, limit, filters));
          const data = JSON.parse(tableJson);
          console.log('✓ Table chargée:', data.rows.length, 'lignes');
          
          // Créer/remplacer le tableau dans la page
          createPayrollTable(data);
          
        } catch (error) {
          console.error('Erreur chargement table:', error);
        }
      }
      
      // Créer le tableau de paie dans l'UI
      function createPayrollTable(data) {
        // Trouver le conteneur après les graphiques
        const pageBody = document.querySelector('.page-body .container-xl');
        if (!pageBody) return;
        
        // Vérifier si le tableau existe déjà
        let tableCard = document.getElementById('payroll-table-card');
        
        if (!tableCard) {
          // Créer la card pour le tableau
          const tableRow = document.createElement('div');
          tableRow.className = 'row row-deck row-cards mt-3';
          tableRow.innerHTML = `
            <div class="col-12">
              <div class="card" id="payroll-table-card">
                <div class="card-header">
                  <h3 class="card-title">Données de paie</h3>
                  <div class="ms-auto">
                    <span class="badge bg-blue">${data.total} lignes</span>
                  </div>
                </div>
                <div class="table-responsive">
                  <table class="table table-vcenter card-table">
                    <thead>
                      <tr>
                        <th>Matricule</th>
                        <th>Nom</th>
                        <th>Date de paie</th>
                        <th>Catégorie</th>
                        <th class="text-end">Montant</th>
                      </tr>
                    </thead>
                    <tbody id="payroll-table-body">
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          `;
          pageBody.appendChild(tableRow);
          tableCard = document.getElementById('payroll-table-card');
        }
        
        // Remplir le tbody
        const tbody = document.getElementById('payroll-table-body');
        if (tbody) {
          tbody.innerHTML = '';
          
          data.rows.forEach(row => {
            const tr = document.createElement('tr');
            const montantClass = row.montant >= 0 ? 'text-success' : 'text-danger';
            tr.innerHTML = `
              <td><span class="text-secondary">${row.matricule}</span></td>
              <td>${row.nom}</td>
              <td>${window.fmtDate(row.date_paie)}</td>
              <td><span class="badge">${row.categorie}</span></td>
              <td class="text-end ${montantClass}">
                ${window.fmtCad(row.montant)}
              </td>
            `;
            tbody.appendChild(tr);
          });
        }
      }
    </script>
    <script>
      const DASHBOARD_CHART_IDS = {
        revenue: "dashboard-revenue",
        active: "dashboard-active",
        net: "dashboard-net",
      };
      const CATEGORY_CHART_ID = "dashboard-categories";
      let categoryDonut = null;
      let categoryDonutReady = false;
      let categoryPendingPayload = null;
      let categoryRowsSnapshot = [];

      document.addEventListener("DOMContentLoaded", function () {
        if (!window.ApexCharts) return;
        const container = document.getElementById('chart-category-employment');
        if (!container) return;
        window.categoryAbsoluteValues = [];
        window.categoryAbsoluteTotal = 0;
        const categoryColors = ['#206bc4','#d63939','#f59f00','#0ca678','#fab005','#ae3ec9','#15aabf','#e64980'];
        categoryDonut = new ApexCharts(container, {
          chart: {
            id: CATEGORY_CHART_ID,
            type: 'pie',
            height: 320,
            width: 380,
            toolbar: {
              show: true,
              tools: {
                customIcons: [getChartOptionsIconConfig()]
              }
            }
          },
          labels: [],
          series: [],
          colors: categoryColors,
          legend: { position: 'bottom' },
          dataLabels: {
            enabled: true,
            style: { fontSize: '14px', fontWeight: 600, colors: ['#ffffff'] },
            dropShadow: { enabled: true }
          },
          responsive: [{
            breakpoint: 480,
            options: {
              chart: { width: 200 },
              legend: { position: 'bottom' }
            }
          }]
        });

        categoryDonut.render().then(() => {
          categoryDonutReady = true;
          if (window.ChartOptions && typeof window.ChartOptions.attachChartOptions === 'function') {
            window.ChartOptions.attachChartOptions('#chart-category-employment','index','categories', categoryDonut, () => categoryRowsSnapshot.map(row => ({ ...row })));
          }
          if (categoryPendingPayload) {
            if (categoryPendingPayload.type === 'data') {
              renderCategoryData(categoryPendingPayload.labels, categoryPendingPayload.values);
            } else {
              renderCategoryPlaceholder();
            }
            categoryPendingPayload = null;
          }
        });
      });

      async function loadDashboardCharts(payDate) {
        try {
          if (!window.appBridge) {
            console.warn('⚠️ AppBridge indisponible, graphiques statiques');
            return;
          }
          const raw = await Promise.resolve(window.appBridge.get_dashboard_charts(payDate || ""));
          const data = JSON.parse(raw);
          updateDashboardChart("revenue", data.revenue);
          updateDashboardChart("active", data.active);
          updateDashboardChart("net", data.net);
          await loadCategoryDistribution(payDate);
        } catch (error) {
          console.error('Erreur chargement graphiques dynamiques:', error);
        }
      }

      function updateDashboardChart(key, payload) {
        if (!window.ApexCharts || !payload) {
          return;
        }
        const chartId = DASHBOARD_CHART_IDS[key];
        if (!chartId) return;
        const labels = payload.labels || [];
        const values = payload.values || [];
        const seriesName = payload.name || key;
        ApexCharts.exec(chartId, "updateOptions", {
          labels,
          series: [{ name: seriesName, data: values }],
        }).catch((err) => console.warn(`⚠️ Impossible de mettre à jour ${chartId}:`, err));
      }

      function renderCategoryPlaceholder() {
        if (!categoryDonutReady || !categoryDonut) {
          categoryPendingPayload = { type: 'placeholder' };
          return;
        }
        categoryRowsSnapshot = [];
        window.categoryAbsoluteValues = [0];
        window.categoryAbsoluteTotal = 0;
        categoryDonut.updateOptions({ labels: ['Données indisponibles'] });
        categoryDonut.updateSeries([100]);
      }

      function renderCategoryData(labels, values) {
        if (!labels.length || !values.length) {
          renderCategoryPlaceholder();
          return;
        }
        if (!categoryDonutReady || !categoryDonut) {
          categoryPendingPayload = { type: 'data', labels, values };
          return;
        }
        const total = values.reduce((sum, v) => sum + Number(v || 0), 0);
        const percentages = total > 0 ? values.map(v => (Number(v || 0) / total) * 100) : values;
        categoryRowsSnapshot = labels.map((label, idx) => ({
          date: label,
          employee: label,
          poste: label,
          net: values[idx],
          gross: values[idx],
          employer_part: values[idx]
        }));
        window.categoryAbsoluteValues = values.slice();
        window.categoryAbsoluteTotal = total;
        categoryDonut.updateOptions({ labels });
        categoryDonut.updateSeries(percentages).then(() => {
          categoryDonut.updateOptions({
            tooltip: {
              y: {
                formatter: function(val){
                  return `${val.toFixed(1)}%`;
                }
              }
            }
          });
        });
      }


      async function loadCategoryDistribution(payDate) {
        if (!window.appBridge) {
          renderCategoryPlaceholder();
          return;
        }
        const safeDate = (payDate || '').replace(/'/g, "''");
        const dateFilter = safeDate ? `WHERE date_paie = '${safeDate}'::date` : '';
        const sql = `
          SELECT
            COALESCE(NULLIF(categorie_emploi, ''), 'Non classé') AS categorie,
            SUM(nb_employes) AS nb
          FROM payroll.v_emp_categories
          ${dateFilter}
          GROUP BY categorie
          ORDER BY nb DESC
        `;
        try {
          const raw = await Promise.resolve(window.appBridge.execute_sql(sql));
        const payload = typeof raw === 'string' ? raw : JSON.stringify(raw || {});
        const parsed = JSON.parse(payload || '{}');
        const rows = Array.isArray(parsed?.rows) ? parsed.rows : [];
        if (!rows.length) {
          renderCategoryPlaceholder();
          return;
        }
        const labels = rows.map(r => r[0] || 'Non classé');
        const values = rows.map(r => Number(r[1]) || 0);
          renderCategoryData(labels, values);
        } catch (error) {
          console.warn('Impossible de charger la répartition des catégories:', error);
          renderCategoryPlaceholder();
        }
      }
    </script>
  </body>
</html>
