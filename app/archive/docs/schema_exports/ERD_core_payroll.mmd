erDiagram

    core_budget_posts {
        integer budget_post_id NOT NULL
        character varying(50) code NOT NULL
        character varying(500) description 
        boolean active NOT NULL
        timestamp with time zone created_at NOT NULL
    }

    core_employee_job_history {
        uuid history_id NOT NULL
        uuid employee_id NOT NULL
        integer code_id NOT NULL
        date date_debut NOT NULL
        date date_fin 
        timestamp with time zone created_at NOT NULL
    }

    core_employees {
        integer employee_id NOT NULL
        character varying(255) employee_key NOT NULL
        character varying(50) matricule_norm 
        character varying(100) matricule_raw 
        character varying(255) nom_norm NOT NULL
        character varying(255) prenom_norm 
        character varying(500) nom_complet 
        character varying(20) statut 
        character varying(50) source_system 
        timestamp with time zone created_at 
        string ... (+3 colonnes)
    }

    core_job_categories {
        integer category_id NOT NULL
        character varying(100) nom NOT NULL
        text description 
        boolean active NOT NULL
        timestamp with time zone created_at NOT NULL
    }

    core_job_codes {
        integer code_id NOT NULL
        character varying(20) code NOT NULL
        character varying(255) titre NOT NULL
        integer category_id 
        boolean active NOT NULL
        timestamp with time zone created_at NOT NULL
    }

    core_pay_codes {
        character varying(100) pay_code NOT NULL
        character varying(255) label NOT NULL
        character varying(100) category NOT NULL
        boolean active NOT NULL
        timestamp with time zone created_at NOT NULL
    }

    payroll_budget_posts {
        integer post_id NOT NULL
        text code 
        text description 
        text category 
        boolean is_active 
    }

    payroll_import_batches {
        integer batch_id NOT NULL
        uuid batch_uuid 
        character varying(500) filename 
        character varying(64) file_checksum 
        integer total_rows 
        integer valid_rows 
        integer invalid_rows 
        integer new_employees 
        integer new_transactions 
        character varying(20) status 
        string ... (+4 colonnes)
    }

    payroll_import_log {
    }

    payroll_import_runs {
    }

    payroll_imported_payroll_master {
        bigint id NOT NULL
        integer N de ligne  
        text Categorie d'emploi 
        text code emploi 
        text titre d'emploi 
        date date de paie  NOT NULL
        text matricule  
        text employ√©  
        text categorie de paie  
        text code de paie  
        string ... (+9 colonnes)
    }

    payroll_kpi_snapshot {
        character varying(20) period NOT NULL
        uuid period_id 
        jsonb data NOT NULL
        timestamp with time zone calculated_at NOT NULL
        integer row_count NOT NULL
    }

    payroll_pay_periods {
        uuid period_id NOT NULL
        date pay_date NOT NULL
        integer pay_day NOT NULL
        integer pay_month NOT NULL
        integer pay_year NOT NULL
        integer period_seq_in_year NOT NULL
        character varying(20) status NOT NULL
        timestamp with time zone created_at NOT NULL
        timestamp with time zone closed_at 
        uuid closed_by 
    }

    payroll_payroll_transactions {
        bigint transaction_id NOT NULL
        integer employee_id NOT NULL
        date pay_date NOT NULL
        integer pay_day 
        integer pay_month 
        integer pay_year 
        integer period_seq_in_year 
        character varying(50) pay_code NOT NULL
        bigint amount_cents NOT NULL
        integer import_batch_id 
        string ... (+4 colonnes)
    }

    payroll_payroll_transactions_2024 {
        bigint transaction_id NOT NULL
        integer employee_id NOT NULL
        date pay_date NOT NULL
        integer pay_day 
        integer pay_month 
        integer pay_year 
        integer period_seq_in_year 
        character varying(50) pay_code NOT NULL
        bigint amount_cents NOT NULL
        integer import_batch_id 
        string ... (+4 colonnes)
    }

    payroll_payroll_transactions_2025 {
        bigint transaction_id NOT NULL
        integer employee_id NOT NULL
        date pay_date NOT NULL
        integer pay_day 
        integer pay_month 
        integer pay_year 
        integer period_seq_in_year 
        character varying(50) pay_code NOT NULL
        bigint amount_cents NOT NULL
        integer import_batch_id 
        string ... (+4 colonnes)
    }

    payroll_payroll_transactions_2026 {
        bigint transaction_id NOT NULL
        integer employee_id NOT NULL
        date pay_date NOT NULL
        integer pay_day 
        integer pay_month 
        integer pay_year 
        integer period_seq_in_year 
        character varying(50) pay_code NOT NULL
        bigint amount_cents NOT NULL
        integer import_batch_id 
        string ... (+4 colonnes)
    }

    payroll_stg_imported_payroll {
        integer stg_id NOT NULL
        character varying(100) matricule_raw 
        character varying(500) employe_raw 
        character varying(50) date_paie_raw 
        character varying(200) categorie_paie_raw 
        character varying(50) montant_raw 
        character varying(50) matricule_clean 
        character varying(255) nom_norm 
        character varying(255) prenom_norm 
        character varying(255) employee_key 
        string ... (+8 colonnes)
    }


